/*! grunt_test - v1.0.0 - 2016-11-22 */function ajaxQuerySys(a,b,c,d,e){this.linkClass=d,$.ajax({dataType:"json",type:"POST",url:b+a,success:function(a){for(var b,e,f=[],g=a.list.length,h=0;h<g;h++)b="<li><a href='javascript:void(0);' class='"+d+" showmodala' id='"+a.list[h].header_id+"'>"+a.list[h].title+"</a><span class='date-annunce pull-right'>"+a.list[h].publish_date+"</span></li>",f.push(b);var e=f.join(" ");$(c).find(".modal-body").append("<ul class='list-group content-ul'>"+e+"</ul>");var i=a.pagebean,j=parseInt(i.pageSize),k="<ul class='pagination pull-right pagination-sm page-nums'><li class='pagereview'><a class='firstPage aPage' pageIndex='1' href='javascript:void(0);'>首页</a></li><li class='pagereview'><a class='prePage aPage' pageIndex='"+i.prePage+"'href='javascript:void(0);' >上一页</a></li><li class='pagereview'><a class='nextPage aPage' pageIndex='"+i.nextPage+"'href='javascript:void(0);' >下一页</a></li><li class='pagereview'><a class='lastPage aPage' pageIndex='"+j+"'href='javascript:void(0);' >尾页</a></li><li class='pagereview'><a href='javascript:void(0);'>"+i.pageIndex+"/"+j+" </a></li></ul>";$(c).find(".content-ul").after(k);for(var l={},h=0;h<a.list.length;h++){var m=[],n=a.list[h].header_id;m.push(a.list[h].content),m.push(a.list[h].publish),m.push(a.list[h].publish_date),m.push(a.list[h].title),l[n]=m}$(c).find("a").on("click",function(){for(var a=this.id,b=0;b<l[a].length;b++)l[a][b]||(l[a][b]=" ");$("."+d).find("h4").text(l[a][3]),$("."+d).find(".name").text(l[a][1]),$("."+d).find(".date").text(l[a][2]),$("."+d).find(".modalbody-content").html(l[a][0])})}})}function ajaxQueryPage(a,b,c,d,e){this.pageIndex=a,$.ajax({dataType:"json",type:"POST",url:b+a,success:function(a){for(var b,f,g=[],h=a.list.length,i=0;i<h;i++)b="<li><a href='javascript:void(0);' class='"+d+" showmodala' id='"+a.list[i].header_id+"'>"+a.list[i].title+"</a><span class='date-annunce pull-right'>"+a.list[i].publish_date+"</span></li>",g.push(b);var f=g.join(" ");$(c).find(".modal-body").append("<ul class='list-group content-ul'>"+f+"</ul>");var j=a.pagebean,k=parseInt(j.pageSize),l="<ul class='pagination pull-right pagination-sm page-nums'><li class='pagereview'><a class='firstPage aPage' pageIndex='1' href='javascript:void(0);'>首页</a></li><li class='pagereview'><a class='prePage aPage' pageIndex='"+j.prePage+"'href='javascript:void(0);' >上一页</a></li><li class='pagereview'><a class='nextPage aPage' pageIndex='"+j.nextPage+"'href='javascript:void(0);' >下一页</a></li><li class='pagereview'><a class='lastPage aPage' pageIndex='"+k+"'href='javascript:void(0);' >尾页</a></li><li class='pagereview'><a href='javascript:void(0);'>"+j.pageIndex+"/"+k+" </a></li></ul>";$(c).find(e).after(l);for(var m={},i=0;i<a.list.length;i++){var n=[],o=a.list[i].header_id;n.push(a.list[i].content),n.push(a.list[i].publish),n.push(a.list[i].publish_date),n.push(a.list[i].title),m[o]=n}$(c).find(".content-ul").find("a").on("click",function(){for(var a=this.id,b=0;b<m[a].length;b++)m[a][b]||(m[a][b]=" ");$("."+d).find("h4").text(m[a][3]),$("."+d).find(".name").text(m[a][1]),$("."+d).find(".date").text(m[a][2]),$("."+d).find(".modalbody-content").html(m[a][0])})}})}var srmObj={};$(".showbars").on("click",function(){$(this).parents(".logined-nav-header").siblings(".logined-nav").slideToggle()}),srmObj.logined_nav=$(".logined-nav"),$(window).resize(function(){thisWidth=$(window).width(),thisWidth>=1200?srmObj.logined_nav.show():srmObj.logined_nav.hide()}),srmObj.addnav=function(){$.ajax({type:"GET",url:"../SrmHome/menu_1.json",dataType:"json",success:function(a){var b,c,d,e,f=[];for(key in a)if(a[key].childList){if(b=" ",e=a[key].childList.length,a[key].thirdList)for(var g=0;g<e;g++){c=" ";for(var h=a[key].childList[g].id,i=0;i<a[key].thirdList[h].length;i++)c+="<li><a id ='"+a[key].thirdList[h][i].id+"' href='"+a[key].thirdList[h][i].protocol+"://"+a[key].thirdList[h][i].servernm+a[key].thirdList[h][i].subsyproject+a[key].thirdList[h][i].scope+"'>"+a[key].thirdList[h][i].des+"</a></li>";b+="<div><span class='icon-star text-danger nav-icon-h4'></span>"+a[key].childList[g].des+"</div><ul class='thirdul'>"+c+"</ul>"}else for(var g=0;g<e;g++)b+="<li class='padleft'><a id ='"+a[key].childList[g].id+"' href='"+a[key].childList[g].protocol+"://"+a[key].childList[g].servernm+a[key].childList[g].subsyproject+a[key].childList[g].scope+"'>"+a[key].childList[g].des+"</a></li>";f.push("<li class='login-pa-li' id=' "+a[key].id+"'>"+a[key].des+"<span class='coverspan'></span><ul class='login-ch-ul'>"+b+"</ul></li>")}else f.push("<li><a href='javascript:void(0);'>"+a[key].des+"</a></li>");d=f.join(" "),$(".menu-index").after(d)}})},srmObj.removeDisabled=function(a){$("."+a).find(".singupbtn").removeAttr("disabled")},srmObj.addAgreebutton=function(){$(".providesignup-modal").find(".agree,.singupbtn,.showclose").show(),$(".providesignup-modal").find("input[type='checkbox']").removeAttr("checked"),srmObj.removeDisabled("providesignup-modal")},$(".providesignup-modal").on("click","button[data-dismiss='modal']",function(){$("#SignUp").parents("#sinupform").remove(),$(".agree").find(".agree-tip").remove(),srmObj.addAgreebutton()}),srmObj.sethide=function(a){0===$(".uploadify-queue").find(".uploadify-queue-item").length&&($(".submitfile").hide(),$(".uploadify-queue").siblings(".addtip").remove(),$(a).prop("disabled",!1))},srmObj.addfiles=function(){$("#pon_file_input").uploadify({fileTypeDesc:"Image Files",buttonText:"上传报名附件",progressData:"percentage",fileTypeExts:"*.jpg;*.gif;*.bmp;*.doc;*.xls;*.docx;*.xlsx;*.txt;*.pdf;*.ppt;*.pptx;*.rar;*.dwg;*.vsd;*.eml;*.msg",swf:"../public/js/jquery.uploadify-v3.2/uploadify.swf",uploader:"../SrmHome/Login.jsp?__METHOD=upload_ponFile",cancelImg:"../public/js/jquery.uploadify-v3.2/uploadify-cancel.png",fileObjName:"ponfileinput",removeCompleted:!1,auto:!1,multi:!0,onSelect:function(){0!==$(".uploadify-queue").length&&($(".successtip").remove(),$(".submitfile").show(),$(".uploadify-queue").next("span").remove(),$(".uploadify-queue").after("<span style='color:#E21E1E;' class='addtip'>点击上传按钮上传附件</span>"),$("#singdetail").prop("disabled",!0)),$("body").css({"overflow-y":"auto"})},onCancel:function(){setTimeout("srmObj.sethide('#singdetail')",3e3)},onFallback:function(){alert("您未安装FLASH控件，无法上传！请安装FLASH控件后再试。")},onUploadSuccess:function(a,b,c){b=$.parseJSON(b);var d;d="<tr style='display:none;'><td>ID</td><td><input type='text' name='fileidlist' value='"+b.file_id+"' readonly/></td></tr><tr style='display:none;'><td>附件名</td><td><input type='text' name='filenamelist' value='"+b.filename+"' readonly/></td></tr>",$(".addClassfile").find(".addfiletable").find("tbody").append(d)},onQueueComplete:function(a){$(".submitfile").siblings(".successtip").remove(),$(".uploadify-queue").next("span").remove(),$("#singdetail").prop("disabled",!1),$(".submitfile").before("<span class='successtip'>"+a.uploadsSuccessful+"个文件上传成功了！</span>")}})},$(".providesignup-modal").find(".purchas-footer").on("click","#singup",function(){if($("body").css({"overflow-y":"auto"}),$(this).siblings(".agree").find("input[type='checkbox']").prop("checked")===!0){$(this).prop("disabled","true");var a=$(this).parents(".provide-modal").find(".purchas-info").find("table").eq(0).find("tr").find("td").eq(1).text(),b=$(this).parents(".provide-modal").find(".purchas-info").find("table").eq(0).find("tr").find("td").eq(2).text();$(this).parents(".purchas-footer").find(".addform").html("<div id='regTip'>提示：需注册过比亚迪供应商门户才能报名，如未注册，请点击<a href='../protocol/RegisterProtocol.jsp' target='_blank'>注册</a>前往比亚迪供应商门户注册</div><div id='SignUp'><div><div class='singup-modal' id='"+a+"'><div class='clearfix'><table class='table-striped table-bordered table-responsive Complaint-table singup-table'><tr><td class='first-child'>供应商编码</td><td style='display: none'><input name='zb_project_description' id ='zb_project_description' type='hidden' value='"+a+"'/></td><td style='display: none'><input name='zb_header_id' id ='zb_header_id' type='hidden' value='"+b+"'/></td><td class='lefttd'><input name='segment1' id ='segment1' type='text' readonly class='required'/></td><td class='first-child'><span class='text-danger'>*</span>联系邮箱</td><td class='lefttd'><input name = 'mail' id = 'mail' type='text' placeholder='请输入联系邮箱' class='required email'/></td></tr><tr><td class='first-child'><span class='text-danger'>*</span>供应商名称</td><td class='lefttd relativeparent'><input name='description' id='description' type='text' placeholder='请输入注册时的供应商名称，供应商编码自动带出' class='required'/></td><td class='first-child'><span class='text-danger'>*</span>是否给BYD供过货</td><td class='last-child-td lefttd'><label><input type='radio' name='status' value='是' class='select-radio' checked='checked'> 是 </label><label><input type='radio' name='status' value='否' class='select-radio'> 否 </label></td></tr><tr><td class='first-child'><span class='text-danger'>*</span>联系人</td><td class='lefttd'><input name='contactor' id='contactor' type='text' placeholder='请输入联系人姓名' class='required'/></td><td class='first-child'>所供产品物料类型</td><td class='lefttd'><input type='text' name = 'item_type' id = 'item_type' placeholder='请输入物料类型'/></td></tr><tr><td class='first-child'><span class='text-danger'>*</span>联系电话</td><td class='lefttd'><input name='tel' id='tel' type='text' placeholder='请输入联系电话' class='required telnumsvalidate'/></td><td class='first-child'>备注</td><td class='lefttd'><input type='text' name='memo' id = 'memo' placeholder='请输入备注'/></td></tr></table><table class='table table-striped table-bordered table-responsice addfiletable'><tbody><tr><td><input type='file' name='ponfileinput' id='pon_file_input'/><button type='button' class='btn btn-default btn-sm submitfile' onclick='upload_pon_file()'>上传</button></td></tr></tbody></table></div><div class='purchas-footer'><input type='reset' value='重置' class='btn btn-danger btn-sm' id='modalreset'/><input class='btn btn-warning singupbtns btn-sm' value='提交' type='button' id='singdetail'/></div></div></div></div>"),$(this).siblings(".agree").find(".agree-tip").remove(),document.getElementById("agreefor").checked=!1,$(this).siblings(".agree,button").hide(),$(this).hide()}else $(this).prop("disabled","true"),$(this).siblings(".agree").append("<p class='agree-tip'>请先阅读<a href='javascript:void(0);' class='text-primary'>《比亚迪供应商道德行为规范》</a>并且遵守勾选同意</p>");srmObj.addfiles()}),$(".addClassfile").find("button[data-dismiss='modal']").on("click",function(){$(this).parents(".addClassfile").find(".addfiletable").find("tr").not(":last").remove()}),$(".agree").on("click","input[type='checkbox']",function(){$(this).prop("checked")===!0?($(".agree-tip").remove(),srmObj.removeDisabled("providesignup-modal")):$(this).parents(".agree").siblings(".singupbtn").prop("disabled")}),$(".over-long").on("click",".remove",function(){$(this).parents("tr").remove()}),$("form").submit(function(){$(":submit",this).attr("disabled","disabled")}),srmObj.starcarousel=function(){$(".carousel").carousel({interval:5e3})},srmObj.stopcarousel=function(){$(".carousel").carousel("pause")},$("a[data-toggle='modal'],button[data-toggle='modal']").on("click",function(){srmObj.stopcarousel()}),$("body").on("click",".showmodala",function(){$(".modalvisble").is(":visible")===!1&&$(".wrap").append("<div class='mask'></div>"),srmObj.stopcarousel();var a=$(this).attr("class").split(" ")[0];$("."+a).fadeIn(200)}),$(".showmodal").on("click","button[data-dismiss='modal']",function(){0!==$(this).parents(".showmodal").find(".uploadify-queue").length&&($(this).parents(".showmodal").find(".submitfile").hide(),$(this).parents(".showmodal").find(".uploadify-queue-item,.successtip").remove()),0!==$(this).parents("form").length&&$(this).parents("form")[0].reset(),$(this).parents(".showmodal").hide(),$(".modalvisble").is(":visible")===!1&&($(".mask").remove(),srmObj.starcarousel(),$("body").css({"padding-right":"0","overflow-y":"auto"}))}),$("a[data-toggle='toggle']").on("click",function(){srmObj.stopcarousel(),$("body").css({"overflow-y":"hidden"})}),$(".showmodal").on("click",".singupclose",function(){$(".uploadify-queue-item,.submitfile").remove(),$(".successtip").remove(),srmObj.addAgreebutton(),$(this).parents(".providesignup-modal").hide(),$(this).parents(".providesignup-modal").find(".addform").html(""),$(".modalvisble").is(":visible")===!1&&$(".mask").remove()}),srmObj.addPages=function(a,b){$("."+b).find(".modal-body").append("<ul class='pagination pull-right pagination-sm page-nums'><li class='pagereview first'><a href='javascript:void(0);'>首页</a></li><li class='pagereview previous'><a href='javascript:void(0);'>上一页</a></li><li class='pagereview next'><a href='javascript:void(0);'>下一页</a></li><li class='pagereview last'><a href='javascript:void(0);'>尾页</a></li><li class='numinput'><a href='javascript:void(0);'><input type='text' value='1' class='inputshow'></a></li><li class='pagereview location'><a href='javascript:void(0);'>跳转</a></li><li><a href='javascript:void(0);'>共 <span class='totalpagenum'></span> 页</a></li></ul>"),$("."+b).on("focus",".inputshow",function(){$(this).val("")})},$.ajax({dataType:"json",type:"GET",url:"../SrmHome/AdminPurchase.jsp?__METHOD=getPage&pageIndex=1",success:function(a){for(var b,c,d=[],e=(a.list.length,0);e<5;e++)b="<li><a href='javascript:void(0);' class='showpolicy showmodala' id='"+a.list[e].header_id+"'>"+a.list[e].title+"</a></li>",d.push(b);var c=d.join(" ");$(".systemup").find(".content-ul").append(c);for(var f={},e=0;e<a.list.length;e++){var g=[],h=a.list[e].header_id;g.push(a.list[e].content),g.push(a.list[e].publish),g.push(a.list[e].publish_date),g.push(a.list[e].title),f[h]=g}$(".shownewsdetails").find("a").on("click",function(){for(var a=this.id,b=0;b<f[a].length;b++)f[a][b]||(f[a][b]=" ");$(".showpolicy").find("h4").text(f[a][3]),$(".showpolicy").find(".name").text(f[a][1]),$(".showpolicy").find(".date").text(f[a][2]),$(".showpolicy").find(".modalbody-content").html(f[a][0])})}}),srmObj.thisIndex;var addhelppolicLis=function(a,b,c,d){$("."+a).find("."+b).on("click",function(){switch(srmObj.thisIndex=1,$("."+c).find(".modal-body").find(".content-ul, .pagination").remove(),this.url=d,d){case"../SrmHome/AdminPurchase.jsp?__METHOD=getPage&pageIndex=":ajaxQueryPage(srmObj.thisIndex,"../SrmHome/AdminPurchase.jsp?__METHOD=getPage&pageIndex=","#Purchasing-lists","showpolicy",".content-ul");break;case"../SrmHome/AdminSystemAnno.jsp?__METHOD=getPage&pageIndex=":ajaxQueryPage(srmObj.thisIndex,"../SrmHome/AdminSystemAnno.jsp?__METHOD=getPage&pageIndex=","#System-annumce","showannoucement",".content-ul");break;case"../SrmHome/AdminHelp.jsp?__METHOD=getPage&pageIndex=":ajaxQueryPage(srmObj.thisIndex,"../SrmHome/AdminHelp.jsp?__METHOD=getPage&pageIndex=","#Supplier-help-lists","showhelpmodal",".content-ul")}})};addhelppolicLis("navbar-nav","helplink","showhelpmodalpa","../SrmHome/AdminHelp.jsp?__METHOD=getPage&pageIndex="),addhelppolicLis("systemup","policylink","showpolicymodal","../SrmHome/AdminPurchase.jsp?__METHOD=getPage&pageIndex="),addhelppolicLis("navbar-nav","showsystemmodal","systemshowlist","../SrmHome/AdminSystemAnno.jsp?__METHOD=getPage&pageIndex="),$(".provide-modal").on("click",".aPage",function(){var a=$(this).parents(".provide-modal").attr("id");switch(srmObj.thisIndex=$(this).attr("pageIndex"),$(this).parents(".modal-body").html(""),a){case"System-annumce":ajaxQueryPage(srmObj.thisIndex,"../SrmHome/AdminSystemAnno.jsp?__METHOD=getPage&pageIndex=","#System-annumce","showannoucement",".content-ul");break;case"Supplier-help-lists":ajaxQueryPage(srmObj.thisIndex,"../SrmHome/AdminHelp.jsp?__METHOD=getPage&pageIndex=","#Supplier-help-lists","showhelpmodal",".content-ul");break;case"Purchasing-lists":ajaxQueryPage(srmObj.thisIndex,"../SrmHome/AdminPurchase.jsp?__METHOD=getPage&pageIndex=","#Purchasing-lists","showpolicy",".content-ul")}}),$.ajax({type:"GET",url:"../SrmHome/main.json",dataType:"json",success:function(a){$(".addnewsmodal").on("click",".pagereview",function(){$(this).parents(".addnewsmodal").find(".content-ul").remove();var b=$(this).attr("class"),c=parseInt($(this).siblings(".numinput").find("input").val());isNaN(c)&&(c=1,$(".numinput").find("input").val(1));var d,e,f,g=parseInt(a.news.length),h=Math.ceil(g/5),i=[];switch(d=c===h?parseInt(g-5*(c-1)):5,b){case"pagereview first":$(".numinput").find("input").val(1),c=parseInt($(".numinput").find("input").val()),d=c===h?parseInt(g-5*(c-1)):5,e=0;break;case"pagereview previous":1!==c?(c>h&&(c=2),$(".numinput").find("input").val(c-1),c=parseInt($(".numinput").find("input").val()),e=5*(c+1)-10,d=c===h?parseInt(g-5*c):5):e=0;break;case"pagereview next":c!==h?(c>h&&(c=h-1),$(".numinput").find("input").val(c+1),d=c+1===h?parseInt(g-5*c):5,e=5*c):e=5*(c-1);break;case"pagereview last":$(".numinput").find("input").val(h),c=parseInt($(".numinput").find("input").val()),e=5*(c-1),d=c===h?parseInt(g-5*(c-1)):5;break;case"pagereview location":c>h&&(c=h,$(".numinput").find("input").val(c)),c||(c=1,$(".numinput").find("input").val(c)),d=c===h?parseInt(g-5*(c-1)):5,e=5*(c-1)}for(var j=0;j<d;j++)f="<li><a href='"+a.news[j+e].target+"' target='blank'>"+a.news[j+e].title+"</a><span class='date-annunce pull-right'>"+a.news[j+e].date+"</span></li>",i.push(f);var k=i.join(" ");$(".addnewsmodal").find(".news").append("<ul class='list-group content-ul'>"+k+"</ul>")});var b,c,d=[],e=a.news.length;e>=5&&(e=5);for(var f=0;f<e;f++)b="<li><a href='"+a.news[f].target+"' target='blank'>"+a.news[f].title+"</a></li>",d.push(b);var c=d.join(" ");$(".addnewsparent").find(".news").append("<ul class='list-group content-ul'>"+c+"</ul>"),$(".news").on("click",".more",function(){$(".addnewsmodal").find(".page-nums,.content-ul").remove(),srmObj.addPages(a.news,"addpages");var b,c,d=[],e=a.news.length;e>=5&&(e=5);var f=Math.ceil(a.news.length/5);$(".addnewsmodal").find(".totalpagenum").text(f);for(var g=0;g<e;g++)b="<li><a href='"+a.news[g].target+"' target='blank'>"+a.news[g].title+"</a><span class='date-annunce pull-right'>"+a.news[g].date+"</span></li>",d.push(b);var c=d.join(" ");$(".addnewsmodal").find(".news").append("<ul class='list-group content-ul'>"+c+"</ul>")})}}),$(".compaintmodal2").on("click",".comfeedradio",function(){var a=$(this).attr("class").split(" ")[1];switch($(this).prop("checked","true"),a){case"comradio":$(this).parents(".Complaint-table").find("select").html("<option>违反公平公正原则</option><option>收受财物</option><option>损害比亚迪公司利益</option><option>其他</option>");break;case"feedradio":$(this).parents(".Complaint-table").find("select").html("<option>个人反馈</option><option>流程反馈</option>")}}),srmObj.dareselect=function(){$(".datetimepicker").datetimepicker({minView:"month",language:"zh-CN",format:"yyyy-mm-dd",todayBtn:1,autoclose:1})},srmObj.addfilesshow=function(a,b,c,d,e){$(a).on("click","."+b,function(){var a,b=this.id,f=$(this).attr("class").split(" ")[0];a=b?b:f.split("_")[1];var g,h,i={},j=[];$("."+e).find(".filedisplay").html(),$.ajax({url:c,dataType:"json",type:"POST",data:$.param({header_id:a,filetype:d}),success:function(b){for(key in b)i[a]=b.srmattslist;for(var c=0;c<i[a].length;c++)g="<a href='../SrmHome/Download.jsp?__METHOD=Download&fileId="+i[a][c].id+"' target='_blank'>"+i[a][c].realfilename+"</a>",j.push(g);h=j.join(" "),$("."+e).find(".filedisplay").html(h)},error:function(){$("."+e).find(".filedisplay").html("无")}})})},$(".wrap").on("click",".closevalidate",function(){$(this).parents(".validate").remove(),0===$("body").find(".modalvisble").length&&$(".wrap").find(".mask").remove(),$(".mask").css({"z-index":"1030"})}),srmObj.telnumsvalidate=function(a){var b=/^1[3|5|8][7][4]\d{9}$/,c=/^0\d{2,3}-?\d{7,8}$/;return b.test(a)||c.test(a)},srmObj.deleteRecord=function(a,b,c){$(a).on("click",".removeRecode",function(){var d=$(this),e=$(a).find("#pageIndex").val(),f=$("#delete_modal"),g=$("#delete_message_modal");f.modal("show"),f.find(".message").html("确定要删除此条记录吗？"),f.find(".ok").on("click",function(){var a=d.parents(".child-tabs").attr("id"),f=d.parent().parent().find(b).attr("id");$.ajax({url:"../SrmHome/SrmAdministration.jsp?__METHOD=deleteRecord",type:"POST",data:$.param({header_id:f,file_type:c}),success:function(b){var c=JSON.parse(b);if(c.delFlag>0){switch(a){case"num6":ajaxQueryPage(e,"../SrmHome/AdminHelp.jsp?__METHOD=getPage&pageIndex=",$("#help_show"),"#num6","#Supplier-help");break;case"num5":ajaxQueryPage(e,"../SrmHome/AdminPurchase.jsp?__METHOD=getPage&pageIndex=",$("#purchase_show"),"#num5","#Purchasing-check");break;case"num3":ajaxQuerySys(e,"../SrmHome/AdminSystemAnno.jsp?__METHOD=getPage&pageIndex=",$("#sysAnnoShow"),"#num3","#announcement")}g.modal("show"),g.find(".message").html("删除成功！")}else g.modal("show"),g.find(".message").html("删除失败！")}})})})},srmObj.packageUpload=function(a,b,c,d){a.uploadify({fileTypeDesc:"Image Files",buttonText:"上传附件",progressData:"percentage",fileTypeExts:"*.jpg;*.gif;*.bmp;*.doc;*.xls;*.docx;*.xlsx;*.txt;*.pdf;*.ppt;*.pptx;*.rar;*.dwg;*.vsd;*.eml;*.msg",swf:"../public/js/jquery.uploadify-v3.2/uploadify.swf",uploader:b,cancelImg:"../public/js/jquery.uploadify-v3.2/uploadify-cancel.png",fileObjName:c,removeCompleted:!1,auto:!1,multi:!0,onSelect:function(){0!==$(".uploadify-queue").length&&($(".successtip").remove(),$(".submitfile").show(),$(".uploadify-queue").next("span").remove(),$(".uploadify-queue").after("<span style='color:#E21E1E;' class='addtip'>点击上传按钮上传附件</span>"),$(d).prop("disabled",!0)),$("body").css({"overflow-y":"auto"})},onCancel:function(){setTimeout("srmObj.sethide('"+d+"')",2e3)},onFallback:function(){$.alert({title:"",content:"您未安装FLASH控件，无法上传！请安装FLASH控件后再试。",confirmButton:"OK",confirmButtonClass:"btn-info",theme:"black",animationSpeed:300})},onUploadSuccess:function(a,b,c){b=$.parseJSON(b);var d;d="<tr style='display:none;'><td>ID</td><td><input type='text' name='fileidlist' value='"+b.file_id+"' readonly/></td></tr><tr style='display:none;'><td>附件名</td><td><input type='text' name='filenamelist' value='"+b.filename+"' readonly/></td></tr>",$(".addClassfile").find(".addfiletable").find("tbody").append(d)},onQueueComplete:function(a){$(".submitfile").siblings(".successtip").remove(),$(".uploadify-queue").next("span").remove(),$(d).prop("disabled",!1),$(".submitfile").before("<span class='successtip'>"+a.uploadsSuccessful+"个文件上传成功了！</span>")}})},srmObj.addkinder=function(){KindEditor.ready(function(a){var b={height:"500px",uploadJson:"../SrmHome/SrmAdministration.jsp?__METHOD=kind_img",fileManagerJson:"../SrmHome/file_manager_json.jsp",allowFileManager:!0,items:["source","|","undo","redo","|","preview","print","template","code","cut","copy","paste","plainpaste","wordpaste","|","justifyleft","justifycenter","justifyright","justifyfull","insertorderedlist","insertunorderedlist","indent","outdent","subscript","superscript","clearhtml","quickformat","selectall","|","fullscreen","/","formatblock","fontname","fontsize","|","forecolor","hilitecolor","bold","italic","underline","strikethrough","lineheight","removeformat","|","image","table","hr","emoticons","baidumap","pagebreak","anchor","link","unlink","|","about"],afterBlue:function(){this.sync()}};window.editor=a.create(".editor",b)})};var commonConfirm={confirmModal:function(a){var b=$("#common_confirm_modal");b.modal("show"),b.find(".title").html(a.title),b.find(".message").html(a.message),b.find(".ok").on("click",function(){location.replace(a.locationOK)}),b.find(".cancel").on("click",function(){location.replace(a.locationCancel)})}};srmObj.ReplyMessage=function(a,b,c){var d;d=a||"";var e,f,g,h=[],i=d.split("@@**&&");g=b||"";for(var j=g.split("@@**&&"),k=0;k<i.length;k++)f="<li><span class='requrycontent'><p>"+i[k]+"</p></span><i class='removei'> : <span class='replyadmin'></span></i><div class='con_againdate'>"+j[k]+"</div></li>",h.push(f);for(var l=0;l<h.length;l++)"<li><span class='requrycontent'><p></p></span><i class='removei'> : <span class='replyadmin'></span></i><div class='con_againdate'></div></li>"===h[l]&&h.splice(l,1);return e=0===h.length||"否"===i[0]||" "===i[0]?"<li><span class='pauseanswer'>"+c+"</span></li>":"<ul class='replaycontentul'>"+h.join("")},srmObj.ReplySuccess=function(a){$(".wrap").find(".mask").remove(),$("#submittipclick").trigger("click"),$("#submittip").find(".modal-header").remove(),$("#submittip").find(".modal-body").html("<p class='successtip'>回复成功!</p>"),$("#submittipSure").remove(),$("#submittip").find(".modal-footer").find(".cancel").addClass("surerecover").text("确定"),a()};